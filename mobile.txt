(function() {
    // 1. Injetar Estilos Mobile Corrigidos
    const style = document.createElement('style');
    style.innerHTML = `
        /* Barra Lateral para botÃµes */
        .mobile-sidebar {
            position: absolute;
            right: 10px;
            top: 10px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            z-index: 1002;
        }

        .ui-btn {
            position: static !important; /* Reseta a posiÃ§Ã£o original */
            width: 80px !important;
            padding: 8px !important;
            font-size: 10px !important;
            box-shadow: 0 2px #000 !important;
        }

        /* Ajuste dos PainÃ©is para celular */
        .panel {
            right: 100px !important; /* Abre ao lado da sidebar */
            top: 10px !important;
            width: 180px !important;
            max-height: 80vh !important;
            padding: 10px !important;
            font-size: 12px !important;
        }

        /* BotÃ£o de Pulo Compacto */
        #jump-btn {
            width: 80px !important;
            height: 80px !important;
            bottom: 20px !important;
            right: 20px !important;
            font-size: 14px !important;
            opacity: 0.6;
        }

        /* Controle de Zoom mais discreto */
        .zoom-ctrl {
            left: 10px !important;
            bottom: 20px !important;
        }
        
        .btn-zoom {
            width: 40px !important;
            height: 40px !important;
            font-size: 18px !important;
        }

        /* BotÃ£o Fullscreen */
        #fs-btn {
            background: #444;
            border: 1px solid #fff;
            color: #fff;
            padding: 5px;
            font-size: 10px;
            border-radius: 4px;
            margin-bottom: 5px;
        }
    `;
    document.head.appendChild(style);

    // 2. Reorganizar os botÃµes existentes
    const sidebar = document.createElement('div');
    sidebar.className = 'mobile-sidebar';
    document.body.appendChild(sidebar);

    // BotÃ£o Fullscreen
    const fsBtn = document.createElement('button');
    fsBtn.id = 'fs-btn';
    fsBtn.innerText = "ðŸ“º FULLSCREEN";
    fsBtn.onclick = () => {
        if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
            fsBtn.innerText = "ðŸ“º SAIR FS";
        } else {
            document.exitFullscreen();
            fsBtn.innerText = "ðŸ“º FULLSCREEN";
        }
    };
    sidebar.appendChild(fsBtn);

    // Mover botÃµes originais para a sidebar
    const btnS = document.getElementById('s-btn');
    const btnH = document.getElementById('h-btn');
    const btnI = document.getElementById('i-btn');
    
    if(btnS) sidebar.appendChild(btnS);
    if(btnH) sidebar.appendChild(btnH);
    if(btnI) sidebar.appendChild(btnI);

    // 3. Ajuste de Sensibilidade (Opcional)
    // Se o player girar muito rÃ¡pido no celular, podemos limitar aqui
    window.camRotSpeed = 0.03; 

    console.log("Layout Mobile Otimizado!");
})();
